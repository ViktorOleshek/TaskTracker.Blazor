@page "/projects"
@rendermode InteractiveServer

<MudContainer>
	<MudCard>
		<MudCardHeader>
			<MudText Typo=@Typo.h4>Projects</MudText>
			<MudSpacer />
			<MudButton Color=@Color.Primary OnClick=AddProject>
				<MudIcon Icon=@Icons.Material.Filled.Add /> Add Project
			</MudButton>
		</MudCardHeader>
		<MudCardContent>
			<MudTable Items="projects" Hover="true" Striped="true" Dense="true">
				<HeaderContent>
					<MudTh>Name</MudTh>
					<MudTh>Start Date</MudTh>
					<MudTh>Finish Date</MudTh>
					<MudTh>Actions</MudTh>
				</HeaderContent>
				<RowTemplate Context="project">
					<MudTd>@project.ProjectName</MudTd>
					<MudTd>@(project?.StartDate?.ToShortDateString() ?? "—")</MudTd>
					<MudTd>@(project.FinishDate?.ToShortDateString() ?? "Ongoing")</MudTd>
					<MudTd>
						<MudIconButton Icon=@Icons.Material.Filled.Info
									   Color=@Color.Primary
									   OnClick="() => InfoProject(project.ProjectId)" />

						<MudIconButton Icon=@Icons.Material.Filled.Edit
									   Color=@Color.Primary
									   OnClick="() => EditProject(project)" />

						<MudIconButton Icon=@Icons.Material.Filled.Delete
									   Color=@Color.Error
									   OnClick="() => DeleteProject(project.ProjectId)" />
					</MudTd>
				</RowTemplate>
			</MudTable>
			<MudTablePagination RowsPerPageString="Rows per page" />
		</MudCardContent>
	</MudCard>
</MudContainer>
